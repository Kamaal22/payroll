<%- include('home.html') -%>
<style>
    body{
    margin-top: 5%;
    margin-left: 5%;
    margin-right:5%;

    
    }
    .ml{
        margin-left: 12px;


    }
</style>
<head>

    <a href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.min.css"></a>
    <script src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.min.js"></script>
</head>


        <button type="button" class="btn btn-primary  mb-3 ml" data-bs-toggle="modal" data-bs-target="#myModal" onclick="show_mode();">
           Add Department
         </button
   
        class="container-fluid mt-5">

   
         

           <!-- DataTales Example -->
           <div class="card shadow mb-4">    
               <div class="card-header py-3">
                   <h6 class="m-0 font-weight-bold text-primary">Department</h6>
               </div>
            

               <div class="card-body">
                   <div class="table-responsive">
                       <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                           <thead>
                               <tr>
                                <tr><th>SerialNO</th>
                                   <th>Name</th>
                                   <th>Desc</th> 
                                   <th>Action</th>
                         
                               </tr>
                           </thead>
                         
                           <tbody>
                            <%  var n=1 %>
                     
                
                               <% data.forEach( function(d){ %>
                                   <tr>
                                    <td><%=n%></td>
                                       <td><%= d.name%></td>
                                       <td><%= d.desc%></td> 
                                    <td> <span  class="btn btn-primary" onclick="edit(`<%= d._id%>`,`<%= d.name%>`,`<%= d.phone%>`,`<%= d.user_name%>`,`<%= d.password%>`)">EDIT </span></td>
                                   
                                 
                                   </tr> 
                                   <%n++%>
                              <% })%>
                              
                           </tbody>
                       </table>
                   </div>
               </div>
           </div>

       </div>
       </div>
       <!-- /.container-fluid -->



<div class="modal fade" id="myModal"   role="dialog" aria-hidden="true">
   <div class="modal-dialog" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" id="exampleModalLabel">Add Dept </h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
        </div>

        <div class="modal-body">

            <form action="/save_dept" method="post">
                <div class="row">
                    <div class="col-lg-12">
                        <label>Name</label>
                        <input type="text" class="form-control" name="name" id="name">
                    </div>
                    <div class="col-lg-12">
                        <label>Desc</label>
                        <textarea name="desc" id="desc" class="form-control"></textarea>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Save </button>
                </div>
            </form>

        </div>


        </div>
        </div>
        </div>


        <div class="modal fade" id="editModal" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add Dept </h5>
                        <button type="button" class="close btn" data-bs-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
                    </div>

                    <div class="modal-body">

                        <form action="/edit_dept" method="post">
                            <input type="hidden" name="_id" id="_id">
                            <div class="row">
                                <div class="col-lg-12">

                                    <label>Name</label>
                                    <input type="text" class="form-control" name="_name" id="_name">
                                </div>
                                <div class="col-lg-12">

                                    <label>Desc</label>
                                    <textarea name="_desc" id="_desc" class="form-control"> </textarea>
                                </div>


                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary">Save </button>
                            </div>
                        </form>

                    </div>


                </div>
            </div>
        </div>

<div class="modal-footer">
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>

                        </form>

                    </div>


                </div>
            </div>
        </div>
        <script>
            function show_mode() {
                $('#myModal').modal('show');
            }

            function edit(_id, name, desc) {
                $('#_name').val(name)
                $('#_desc').val(name)
                $('#_id').val(_id)
                $('#editModal').modal('show');
            }
        </script>
