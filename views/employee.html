<%- include('home.html') -%>
    <style>
        body{
        margin-top: 5%;
        margin-left: 5%;
        margin-right:5%;
    
        
        }
        .ml{
            margin-left: 12px;
    
    
        }
    </style>
    
        <button type="button" class="btn btn-primary mb-3 ml" data-bs-toggle="modal" data-bs-target="#myModal" onclick="show_mode();">
           Add  Employee
         </button
   
        class="container-fluid">
           <!-- DataTales Example -->
           <div class="card shadow mb-4">    
               <div class="card-header py-3">
                   <h6 class="m-0 font-weight-bold text-dark">Employee Details</h6>
               </div>
            

               <div class="card-body">
                   <div class="table-responsive">
                       <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                           <thead>
                               <tr><th>SerialNO</th>
                                   <th>Name</th>
                                   <th>Phone</th>
                                   <th>email</th>
                                   <th>address</th>
                                   <th>qualification</th>
                                   <th>Department</th>
                                   <th>DOB</th>
                                  
                                <th>Action</th>
                         
                               </tr>
                           </thead>
                         
                           <tbody>
                          <%  var n=1 %>
                        
                   
                               
                               <%data.forEach(function(d){ %>
                                   <tr>
                                       <td><%= n% ></td>
                                       <td><%= d.empname %></td>
                                       <td><%= d.phone %></td>
                                       <td><%= d.email %></td>
                                       <td><%= d.address%></td>
                                       <td><%= d.qualification %></td> 
                                       <td><%= d.departments.name %></td> 
                                         <td><%=d.DOB %></td> 
                                    <td> <span  class="btn btn-primary " onclick="edit(`<%= d._id%>`,`<%= d.empname%>`,`<%= d.phone%>`,`<%= d.email%>`,`<%= d.adddress%>`,`<%= d.qualification %>`,`<%= d.departments.name %>`,`<%= d.DOB%>`)">EDIT </span></td>

                                   </tr> 
                                            <%n++%>
                              <% })%>
                        
                              
                           </tbody>
                       </table>
                   </div>
               </div>
           </div>

       </div>
       </div>
       <!-- /.container-fluid -->



<div class="modal fade" id="myModal"   role="dialog" aria-hidden="true">
   <div class="modal-dialog" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" id="exampleModalLabel">Add New Employee </h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
        </div>

        <div class="modal-body">

            <form action="/save_emp" method="post">
                <div class="row">
                    <div class="col-lg-12">
                        <label>Employee Name</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Enter First Name">
                    </div>
                    <div class="col-lg-12">
                        <label>Phone</label>
                        <input type="text" class="form-control" name="phone" id="phone" placeholder="Enter phone number">
                    </div>
                    <div class="col-lg-12">
                        <label>Email</label>
                        <input type="text" class="form-control" name="email" id="email" placeholder="Enter Email">
                    </div>
                    <div class="col-lg-12">
                        <label>Address</label>
                        <input type="text" class="form-control" name="address" id="address" placeholder="Enter Address">
                    </div>
                    <div class="col-lg-12">
                        <label>qualification</label>
                        <input type="text" class="form-control" name="qualification" id="qualification" placeholder="Enter Employee qualification">
                    </div>
                    <div class="col-lg-12">
                        <label>DOB</label>
                        <input type="date" class="form-control" name="DOB" id="DOB">
                    </div>
                    <div class="col-lg-12">
                        <label>Salary</label>
                        <input type="number" class="form-control" name="salary" id="salary" placeholder="Enter Employee salary">
                    </div>

                    <div class="col-lg-12">
                        <label>Department</label>
                        <select class="form-control" style="width: 100%;" id="department_id" name="department_id">
                             <% data.forEach(function(d){ %>
                                 <option value="<%= d._id%>"> <%=d.name%> </option>
                             <% })%>
                       
                         </select>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>

        </div>


        </div>
        </div>
        </div>


        <div class="modal fade" id="editModal" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Update Employee </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
               </button>
                    </div>

                    <div class="modal-body">

                        <form action="/edit_emp" method="post">

                            <div class="row">
                                <div class="col-lg-12">
                                    <label>Employee Name</label>
                                    <input type="text" class="form-control" name="_name" id="_name" placeholder="Enter First Name">
                                </div>
                                <div class="col-lg-12">
                                    <label>Phone</label>
                                    <input type="text" class="form-control" name="_phone" id="_phone" placeholder="Enter phone number">
                                </div>
                                <div class="col-lg-12">
                                    <label>Email</label>
                                    <input type="text" class="form-control" name="_email" id="_email" placeholder="Enter Username">
                                </div>
                                <div class="col-lg-12">
                                    <label>qualification</label>
                                    <input type="text" class="form-control" name="_qua" id="_qua" placeholder="Enter Username">
                                </div>
                                <div class="col-lg-12">
                                    <label>DOB</label>
                                    <input type="date" class="form-control" name="_DOB" id="_DOB">
                                </div>
                                <div class="col-lg-12">
                                    <label>Department</label>
                                    <select class="form-control" style="width: 100%;" id="_department_id" name="_department_id">
                                        
                                        
                                        <% data.forEach(function(d){ %>
                                             <option value="<%= d._id%>"> <%=d.name%> </option>
                                         <% })%>
                                   
                                     </select>
                                </div>




                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>

                        </form>

                    </div>


                </div>
            </div>
        </div>


        <script>
       

            function show_mode() {
                $('#myModal').modal('show');
            }

            function edit(_id, empname, email, phone, adddress, DOB, qualification, adddress, Department) {
                $('#_name').val(empname)
                $('#_email').val(email)
                $('#_phone').val(phone)
                $('#_DOB').val(DOB)
                $('#_address').val(adddress)
                $('#_department').val(name)
                $('#_qua').val(qualification)
                $('#editModal').modal('show');
            }
        </script>

       
